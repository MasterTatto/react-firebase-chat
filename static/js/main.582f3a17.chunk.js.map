{"version":3,"sources":["utils/consts.js","components/Navbar.js","components/Login.js","components/Loader.js","routes.js","components/Chat.js","components/AppRouter.js","App.js","index.js"],"names":["LOGIN_ROUTE","CHAT_ROUTE","Navbar","auth","useContext","Context","useAuthState","user","AppBar","color","position","Toolbar","variant","Grid","container","justify","Button","onClick","signOut","to","Login","login","a","provider","firebase","GoogleAuthProvider","signInWithPopup","console","log","Container","style","height","window","innerHeight","alignItems","width","background","direction","Box","p","Loader","className","publicRoutes","path","Component","privateRoutes","firestore","useState","value","setValue","useCollectionData","collection","orderBy","messages","loading","sendMessage","add","uid","displayName","photoURL","text","createdAt","FieldValue","serverTimestamp","marginTop","border","overflowY","map","message","margin","marginLeft","padding","Avatar","src","TextField","fullWidth","rowsMax","onChange","e","target","AppRouter","component","exact","App","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","createContext","ReactDOM","render","Provider","document","getElementById"],"mappings":"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","file":"static/js/main.582f3a17.chunk.js","sourcesContent":["export const LOGIN_ROUTE = '/login'\r\nexport const CHAT_ROUTE = '/chat'\r\n","import React, {useContext} from 'react';\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport {Button, Grid} from \"@material-ui/core\";\r\nimport {NavLink} from \"react-router-dom\";\r\nimport {LOGIN_ROUTE} from \"../utils/consts\";\r\nimport {Context} from \"../index\";\r\nimport {useAuthState} from \"react-firebase-hooks/auth\";\r\n\r\nconst Navbar = () => {\r\n    const {auth} = useContext(Context)\r\n    const [user] = useAuthState(auth)\r\n\r\n    return (\r\n        <AppBar color={\"secondary\"} position=\"static\">\r\n            <Toolbar variant={\"dense\"}>\r\n                <Grid container justify={\"flex-end\"}>\r\n                    {user ?\r\n                        <Button onClick={() => auth.signOut()} variant={\"outlined\"}>Выйти</Button>\r\n                        :\r\n                        <NavLink to={LOGIN_ROUTE}>\r\n                            <Button variant={\"outlined\"}>Логин</Button>\r\n                        </NavLink>\r\n                    }\r\n                </Grid>\r\n            </Toolbar>\r\n        </AppBar>\r\n    );\r\n};\r\n\r\nexport default Navbar;\r\n","import React, {useContext} from 'react';\r\nimport {Button, Container, Grid} from \"@material-ui/core\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport {Context} from \"../index\";\r\nimport firebase from \"firebase\";\r\n\r\n\r\nconst Login = () => {\r\n    const {auth} = useContext(Context)\r\n\r\n    const login = async () => {\r\n        const provider = new firebase.auth.GoogleAuthProvider()\r\n        const {user} = await auth.signInWithPopup(provider)\r\n        console.log(user)\r\n    }\r\n\r\n    return (\r\n        <Container>\r\n            <Grid container\r\n                  style={{height: window.innerHeight - 50}}\r\n                  alignItems={\"center\"}\r\n                  justify={\"center\"}\r\n            >\r\n                <Grid style={{width:400, background: 'lightgray'}}\r\n                      container\r\n                      alignItems={\"center\"}\r\n                      direction={\"column\"}\r\n                >\r\n                    <Box p={5}>\r\n                        <Button onClick={login} variant={\"outlined\"}>Войти с помощью Google</Button>\r\n                    </Box>\r\n                </Grid>\r\n            </Grid>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default Login;\r\n","import React from 'react';\r\nimport {Button, Container, Grid} from \"@material-ui/core\";\r\nimport Box from \"@material-ui/core/Box\";\r\n\r\nconst Loader = () => {\r\n    return (\r\n        <Container>\r\n            <Grid container\r\n                  style={{height: window.innerHeight - 50}}\r\n                  alignItems={\"center\"}\r\n                  justify={\"center\"}\r\n            >\r\n                <Grid\r\n                      container\r\n                      alignItems={\"center\"}\r\n                      direction={\"column\"}\r\n                >\r\n                    <div className=\"lds-hourglass\"></div>\r\n                </Grid>\r\n            </Grid>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default Loader;\r\n","import {CHAT_ROUTE, LOGIN_ROUTE} from \"./utils/consts\";\r\nimport Login from \"./components/Login\";\r\nimport Chat from \"./components/Chat\";\r\n\r\nexport const publicRoutes = [\r\n    {\r\n        path: LOGIN_ROUTE,\r\n        Component: Login\r\n    }\r\n]\r\n\r\nexport const privateRoutes = [\r\n    {\r\n        path: CHAT_ROUTE,\r\n        Component: Chat\r\n    }\r\n]\r\n","import React, { useContext, useState } from 'react';\r\nimport { Context } from '../index';\r\nimport { useAuthState } from 'react-firebase-hooks/auth';\r\nimport { Avatar, Button, Container, Grid } from '@material-ui/core';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\r\nimport Loader from './Loader';\r\nimport firebase from 'firebase';\r\n\r\nconst Chat = () => {\r\n\tconst { auth, firestore } = useContext(Context);\r\n\tconst [user] = useAuthState(auth);\r\n\tconst [value, setValue] = useState('');\r\n\tconst [messages, loading] = useCollectionData(\r\n\t\tfirestore.collection('messages').orderBy('createdAt')\r\n\t);\r\n\r\n\tconst sendMessage = async () => {\r\n\t\tfirestore.collection('messages').add({\r\n\t\t\tuid: user.uid,\r\n\t\t\tdisplayName: user.displayName,\r\n\t\t\tphotoURL: user.photoURL,\r\n\t\t\ttext: value,\r\n\t\t\tcreatedAt: firebase.firestore.FieldValue.serverTimestamp(),\r\n\t\t});\r\n\t\tsetValue('');\r\n\t};\r\n\r\n\tif (loading) {\r\n\t\treturn <Loader />;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<Grid\r\n\t\t\t\tcontainer\r\n\t\t\t\tjustify={'center'}\r\n\t\t\t\tstyle={{ height: window.innerHeight - 50, marginTop: 20 }}\r\n\t\t\t>\r\n\t\t\t\t<div\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\twidth: '80%',\r\n\t\t\t\t\t\theight: '60vh',\r\n\t\t\t\t\t\tborder: '1px solid gray',\r\n\t\t\t\t\t\toverflowY: 'auto',\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{messages.map((message) => (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tmargin: 10,\r\n\t\t\t\t\t\t\t\tborder:\r\n\t\t\t\t\t\t\t\t\tuser.uid === message.uid\r\n\t\t\t\t\t\t\t\t\t\t? '2px solid green'\r\n\t\t\t\t\t\t\t\t\t\t: '2px dashed red',\r\n\t\t\t\t\t\t\t\tmarginLeft: user.uid === message.uid ? 'auto' : '10px',\r\n\t\t\t\t\t\t\t\twidth: 'fit-content',\r\n\t\t\t\t\t\t\t\tpadding: 5,\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Grid container>\r\n\t\t\t\t\t\t\t\t<Avatar src={message.photoURL} />\r\n\t\t\t\t\t\t\t\t<div>{message.displayName}</div>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t<div>{message.text}</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t\t<Grid\r\n\t\t\t\t\tcontainer\r\n\t\t\t\t\tdirection={'column'}\r\n\t\t\t\t\talignItems={'flex-end'}\r\n\t\t\t\t\tstyle={{ width: '80%' }}\r\n\t\t\t\t>\r\n\t\t\t\t\t<TextField\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\trowsMax={2}\r\n\t\t\t\t\t\tvariant={'outlined'}\r\n\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\tonChange={(e) => setValue(e.target.value)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Button onClick={sendMessage} variant={'outlined'}>\r\n\t\t\t\t\t\tОтправить\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t</Container>\r\n\t);\r\n};\r\n\r\nexport default Chat;\r\n","import React, {useContext} from 'react';\r\nimport {Route, Switch, Redirect} from 'react-router-dom'\r\nimport {privateRoutes, publicRoutes} from \"../routes\";\r\nimport {CHAT_ROUTE, LOGIN_ROUTE} from \"../utils/consts\";\r\nimport {useAuthState} from \"react-firebase-hooks/auth\";\r\nimport {Context} from \"../index\";\r\n\r\nconst AppRouter = () => {\r\n    const {auth} = useContext(Context)\r\n    const [user] = useAuthState(auth)\r\n\r\n    return user ?\r\n        (\r\n            <Switch>\r\n                {privateRoutes.map(({path, Component}) =>\r\n                    <Route key={path} path={path} component={Component} exact={true}/>\r\n                )}\r\n                <Redirect to={CHAT_ROUTE}/>\r\n            </Switch>\r\n        )\r\n        :\r\n        (\r\n            <Switch>\r\n                {publicRoutes.map(({path, Component}) =>\r\n                    <Route key={path} path={path} component={Component} exact={true}/>\r\n                )}\r\n                <Redirect to={LOGIN_ROUTE}/>\r\n            </Switch>\r\n        )\r\n};\r\n\r\nexport default AppRouter;\r\n","import React, {useContext} from 'react';\r\nimport {BrowserRouter} from 'react-router-dom'\r\nimport Navbar from \"./components/Navbar\";\r\nimport AppRouter from \"./components/AppRouter\";\r\nimport './App.css'\r\nimport {Context} from \"./index\";\r\nimport {useAuthState} from \"react-firebase-hooks/auth\";\r\nimport Loader from \"./components/Loader\";\r\n\r\nconst App = () => {\r\n    const {auth} = useContext(Context)\r\n    const [user, loading, error] = useAuthState(auth)\r\n\r\n    if (loading) {\r\n        return <Loader/>\r\n    }\r\n\r\n    return (\r\n        <BrowserRouter>\r\n            <Navbar/>\r\n            <AppRouter/>\r\n        </BrowserRouter>\r\n    );\r\n};\r\n\r\nexport default App;\r\n","import React, { createContext } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport firebase from 'firebase';\r\nimport 'firebase/firestore';\r\nimport 'firebase/auth';\r\n\r\nfirebase.initializeApp({\r\n\tapiKey: 'AIzaSyBUZbyQAgAjhtF41ncL9542CVR24oyNqag',\r\n\tauthDomain: 'chat-app-ba3f0.firebaseapp.com',\r\n\tprojectId: 'chat-app-ba3f0',\r\n\tstorageBucket: 'chat-app-ba3f0.appspot.com',\r\n\tmessagingSenderId: '404954101638',\r\n\tappId: '1:404954101638:web:e03e29a17ce964a8f09e07',\r\n\tmeasurementId: 'G-EZ15VKMKMG',\r\n});\r\n\r\nexport const Context = createContext(null);\r\n\r\nconst auth = firebase.auth();\r\nconst firestore = firebase.firestore();\r\n\r\nReactDOM.render(\r\n\t<Context.Provider\r\n\t\tvalue={{\r\n\t\t\tfirebase,\r\n\t\t\tauth,\r\n\t\t\tfirestore,\r\n\t\t}}\r\n\t>\r\n\t\t<App />\r\n\t</Context.Provider>,\r\n\tdocument.getElementById('root')\r\n);\r\n"],"sourceRoot":""}